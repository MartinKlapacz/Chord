syntax = "proto3";

package chord;

message NodeMsg {
  string url = 1;
}

message Empty {
}

message NotifyRequest {
  string address = 1;
}

message FingerTableMsg {
  repeated NodeMsg fingers = 1;
}

message FingerInfoMsg {
  string id = 1;
  string url = 2;
}

message NodeInfo {
  string url = 1;
  string id = 2;
  FingerInfoMsg predecessor = 3;
  repeated FingerInfoMsg fingerInfos = 4;
}



service Chord {
  rpc FindSuccessor (NodeMsg) returns (NodeMsg);
  rpc FindPredecessor (NodeMsg) returns (NodeMsg);
  rpc GetPredecessor (Empty) returns (NodeMsg);
  rpc SetPredecessor (NodeMsg) returns (Empty);

  // debug
  rpc GetNodeInfo (Empty) returns (NodeInfo);
}
